<html>
<body>
<LINK REL="stylesheet" type="text/css" HREF="../default.css">
<head><title>/scon</title></head>
<H1>/scon</H1>
<br>
<br>
The <b>/scon</b> command can change the connection associated with the current script. When a command is not specified, mIRC changes the connection of the current script to the Nth connection. The rest of the code will continue to execute on that connection. When a command is specified, mIRC will execute the command on the specified connection or connections based on the switches provided. Any active connection changes are restored upon returning to the calling routine. A command can be executed on all or some of the connections depending on their types using the -a or -at&lt;Type&gt; switches.

<br>
<br>Connection Type
<br>
<br><b>1</b> = Connected
<br><b>2</b> = Disconnected or Connecting
<br><b>3</b> = 1+2 = Connected, Disconnected, or Connecting (Same as -a)
<br><b>4</b> = Connecting
<br><b>5</b> = 1+4 = Connected or Connecting
<br><b>6</b> = 2+4 = 2 = Disconnected or Connecting
<br><b>7</b> = 3+4 = Disconnected or Connected or Connecting
<br><b>8</b> = Disconnected

<H4>Synopsis</H4>
<pre class ="code">
/scon -rat&lt;type&gt;s [Nth] [command]
</pre>

<H4>Switches</H4>
<b>-r</b>
      - Resets the connection back to what it original was
<br><b>-s</b>
      - Prints the current connection number or the new connection number)
<br><b>-a</b>
      - Perform on all connections.
<br><b>-t</b>&lt;type&gt;
      - Perform on all the connections of a specific type, can only be used with -a.

<H4>Parameters</H4>
<b>&lt;Nth&gt;</b>
      - The Nth connection.
<br><b>&lt;type&gt;</b>
      - The connection type, only used with the t switch.

<H4>Example</H4>


A simple example of using /scon to send a command to all connected connections.

<pre class ="code">
/*
** Global amsg - performs an amsg on all the
** the actives connections you are on.
**
** /gamsg &lt;message&gt;
*/
alias gamsg {
  if (!$1) {
    echo -gtcse info * /gamsg: insufficient parameters
    halt
  }
  ; all active connections
  scon -at1 amsg $unsafe($1-)
}
</pre>
Print all the channels you are on from every connection you have:
<pre class ="code">
alias listChans {
  var %x = 1
  while ($scon(%x)) {
    ; switch connection
    scon %x

    ; iterate over the channels
    var %c = 1, %chans
    while ($chan(%c)) {
      var %chans = $addtok(%chans, $chr(32) $v1, 44)
      inc %c
    }

    ; print channels
    scon -r echo -s $unsafe(Network: $network Channels: %chans)

    ; next connection
    inc %x
  }
}
</pre>

<H4>Compatibility</H4>
Added: mIRC v6.0 (16 Aug 2002)

<H4>Notes</H4>
None

<H4>See also</H4>
<a href="..\identifiers\status.html">$status</a><br>
<a href="..\identifiers\network.html">$network</a><br>
<a href="..\identifiers\scon.html">$scon</a><br>
<a href="..\identifiers\scid.html">$scid</a><br>
<a href="scid.html">/scid</a><br>
</body>
</html>
