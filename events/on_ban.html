<html>
<body>
<LINK REL="stylesheet" type="text/css" HREF="../default.css">
<head><title>On Ban</title></head>
<H1>On Ban</H1>
<br>
<br>
The <b>ON BAN</b> event is triggered whenever a user on a channel has been banned.


<H4>Synopsis</H4>
<pre class = "code">ON &lt;level&gt;:BAN:&lt;*.#[,#]&gt;:&lt;commands&gt;</pre>

<H4>Parameters</H4>
<b>&lt;level&gt;</b> - The corresponding <a href="..\other\access_levels.html">access levels</a> for the event to trigger.
<br><b>&lt;matchtext&gt;</b> - The corresponding <a href="matchtext.html">matchtext</a> for the event to trigger.
<br><b>&lt;*&gt;&lt;#[,#]&gt;</b> - The place, or places where the event listens, you can separate them by comma.

<br><span style="margin-left: 20px;"><b>*</b> - Any channel window
<br><span style="margin-left: 20px;"><b>#</b> - Any channel window
<br><span style="margin-left: 20px;"><b>#channel[,#]</b> - one or more specific channels, separate them by comma

<br><b>&lt;commands&gt;</b> - The commands to be performed when the event triggers

<H4>Local Identifiers</H4>
<a href="..\identifiers\banmask.html">$banmask</a> - Returns the banmask used to ban the user.
<br><a href="..\identifiers\bnick.html">$bnick</a> - Returns the nickname of the user being banned. It is important to note that <a href="..\identifiers\bnick.html">$bnick</a><br> is not always filled, as some bans don't always contain the nickname.

== Comparing levels ==

You can compare the levels of the banner and the banned by prefixing the line with &lt;, &gt;, &lt;=, =&gt;, &lt;&gt; (different than), or =, in the following way:

<pre class ="code">
on >=2:BAN:#mIRC:/msg $chan $nick banned $banmask (legal)
on 1:BAN:#mIRC:/msg $chan $nick banned $banmask (illegal)
</pre>

In this situation, if the banners level is larger than or equal to the banned users level, then it is a legal ban.

Otherwise, it defaults to the second ON BAN line which indicates that it is an illegal ban. Remember, this is comparing the banners and banned users levels and has nothing to do with the level 2 in the definition.

Remember that $banmask is usually a <a href="..\other\wildcard.html">wildcard</a> string which means that it will match both wildcard and non-wildcard user strings in your remote users section.

<H4>Example</H4>
<pre class ="code">; This ban event listens for a ban
; on all channels, and responds by messaging the channel.

ON *:BAN:#:msg # Looks like the address $banmask has just been added to this channel's ban list.</pre>

<pre class ="code">; This example will watch for a ban on two
; specific channels: #myChannel and #myOtherChannel. When a ban is
; noticed, the script will also attempt to find out if a $bnick was set.
; If it was not, it will use it, otherwise it will use $banmask.

ON *:BAN:#myChannel,#myOtherChannel:msg # Wow, so $iif($bnick,$bnick just got in trouble,$banmask was just added to the channel's ban list) $+ .</pre>

<H4>Compatibility</H4>
Added: mIRC v4.5 (30 Jun 1996)

<H4>Notes</H4>
None

<H4>See also</H4>
<a href="..\identifiers\banmask.html">$banmask</a><br>
<a href="..\identifiers\bnick.html">$bnick</a><br>
<a href="..\identifiers\ibl.html">$ibl</a><br>
<a href="..\commands\ban.html">/ban</a><br>
<a href="on_unban.html">On_UnBan</a><br>
</body>
</html>