<html>
<body>
<LINK REL="stylesheet" type="text/css" HREF="../default.css">
<head><title>On Dccserver</title></head>
<H1>On Dccserver</H1>
<br>
<br>
The <b>ON DCCSERVER</b> event triggers a connection attempt is made on mIRC's DCC Server. This event allows easy monitoring of connections and the ability to prevent someone from connecting to mIRC by invoking the <a href="..\commands\halt.html">/halt</a> command.

When triggered by a '''Send''', this event fills the <a href="..\identifiers\filename.html">$filename</a> identifier with the file name attempting to be received.


<H4>Synopsis</H4>
<pre class = "code">ON &lt;level&gt;:DCCSERVER:&lt;Chat|Send|Fserve&gt;:&lt;commands&gt;</pre>

<H4>Parameters</H4>
<b>&lt;level&gt;</b> - The corresponding <a href="..\other\access_levels.html">access levels</a> for the event to trigger.s
<br><b>&lt;Chat|Send|Fserve&gt;</b> - The text that to be matched. Can also be a <a href="..\other\wildcard.html">wildcard</a>.

** '''Chat''' - Triggers if the event is caused by a DCCSERVER Chat.
** '''Send''' - Triggers if the event is caused by a DCCSERVER Send.
** '''Fserve''' - Triggers if the event is caused by a DCCSERVER Fserve.
<br><b>&lt;commands&gt;</b> - The commands to be performed when the event listener's criteria is met.

<H4>Example</H4>
Echo to the active screen some information when a <a href="..\commands\halt.html">/halt</a> is being received:
<pre class ="code">ON *:DCCSERVER:Send:echo User $nick ( $+ $address $+ ) is attempting to send: $filename</pre>

The <b>ON DCCSERVER</b> event can also prevent certain events from happening, based on a certain criteria. For instance, the following event will decline a <a href="..\commands\dcc.html">/dcc</a> send if the file extension is ".exe":
<pre class ="code">ON *:DCCSERVER:Send:if ($right($filename,4) == .exe) { echo -a User $nick just tried to send a file with an .exe extension. It has been declined. | halt }</pre>

The use of the <a href="..\commands\halt.html">/halt</a> command in this instance prevents any further action, even from any confirmation windows from popping up. /halt can also be used on the other '''ON DCCSERVER''' events to prevent anything from happening.

Echo when a user attempts to initiate a <a href="..\commands\dcc.html">/dcc</a> chat:
<pre class ="code">ON *:DCCSERVER:Chat:echo User $nick ( $+ $address $+ ) is attempting to initiate a DCC Chat.</pre>

<H4>Compatibility</H4>
Added: mIRC v5.3 (13 Dec 1997)

<H4>Notes</H4>
None

<H4>See also</H4>
<a href="on_chat.html">On_Chat</a><br>
<a href="on_sendfail.html">On_SendFail</a><br>
</body>
</html>